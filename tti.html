<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTI Simulation Page</title>
    <script>
        let startTime;
        let simulatedTTI = 0;

        function simulateWork(duration) {
            const start = performance.now();
            while (performance.now() - start < duration) {
                // Simulate long task
            }
        }

        function simulateNetworkRequest() {
            return new Promise(resolve => {
                setTimeout(() => {
                    resolve('Network request completed');
                }, Math.random() * 2000 + 1000); // Random delay between 1-3 seconds
            });
        }

        async function calculateTTI() {
            startTime = performance.now();
            simulateWork(200);
            await simulateNetworkRequest();
            simulateWork(300);
            await simulateNetworkRequest();
            simulateWork(150);

            simulatedTTI = Math.round(performance.now() - startTime);
            document.getElementById('tti-value').innerText = `TTI: ${simulatedTTI} ms`;
        }

        function introduceExtraDelay() {
            calculateTTI(); // Recalculate TTI on interaction
            document.getElementById('extra-delay-msg').innerText = 'New TTI calculated!';
        }

        window.onload = () => {
            calculateTTI(); // Calculate TTI on page load
        };
    </script>
</head>
<body>
    <h1>TTI Simulation Page</h1>
    <p id="tti-value">Calculating TTI...</p>
    <p>Hosting URL: <a href="https://playwright-karthik.github.io/qatesting/tti.html" target="_blank">https://playwright-karthik.github.io/qatesting/tti.html</a></p>
    <button onclick="introduceExtraDelay()">Recalculate TTI</button>
    <p id="extra-delay-msg"></p>
</body>
</html>
